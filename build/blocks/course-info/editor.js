!function(){"use strict";var e,t={627:function(){var e=window.wp.element,t=window.wp.blocks,r=window.wp.blockEditor,n=window.wp.coreData,s=window.wp.data,a=window.wp.components,l=window.wp.primitives,o=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})),c=JSON.parse('{"apiVersion":2,"name":"wp-ftek-course-pages/course-info","title":"Course info","category":"widgets","textdomain":"wp-ftek-course-pages","attributes":{"code":{"type":"string","default":""},"credits":{"type":"number","default":0},"homepage_url":{"type":"string","default":""},"info_url":{"type":"string","default":""},"survey_url":{"type":"string","default":""},"student_representatives":{"type":"array","default":[]},"study_perionds":{"type":"array","default":[]},"year":{"enum":["","1","2","3","master"],"default":""},"programs":{"type":"array","default":[]},"participant_count":{"type":"number","default":0}},"style":"file:style-editor.css","editorScript":"file:editor.js"}'),u=window.wp.i18n;const p=["F","TM"],i=[1,2,3,4],m=["1","2","3","master"],d=(0,e.createElement)("svg",null,(0,e.createElement)("image",{style:{width:"100%"},xlinkHref:wpFtekCoursePages.iconUrl}));function g(t){let{meta:r,children:n}=t;const s=[{text:(0,u.__)("Course homepage","wp-ftek-course-pages"),url:r.homepage_url},{text:(0,u.__)("General info","wp-ftek-course-pages"),url:r.info_url},{text:(0,u.__)("Latest survey","wp-ftek-course-pages"),url:r.survey_url},...r.code?[{text:(0,u.__)("Exam statistics","wp-ftek-course-pages"),url:`https://stats.ftek.se/${r.code}`}]:[]].filter((e=>e.url)),a=r.student_representatives.filter((e=>e.name||e.cid));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h2",{className:"course-banner"},`${r.code||(0,u.__)("Course Code","wp-ftek-course-pages")} | ${r.credits||0} ${(0,u._x)("hec","higher education credits","wp-ftek-course-pages")} | ${"master"===r.year?(0,u.__)("Master's course","wp-ftek-course-pages"):r.programs.length>0?r.programs.sort().map((e=>e+r.year||"")).join(" "):(0,u.__)("Program","wp-ftek-course-pages")} | ${r.study_perionds.length>0?r.study_perionds.sort().map((e=>[[e]])).reduce(((e,t)=>{const r=e[e.length-1];return t[0][0]-r[r.length-1]==1?r.push(t[0][0]):e.push(t[0]),e})).map((e=>(0,u._x)("SP%$1s","study period","wp-ftek-course-pages").replace("%$1s",e.length>1?e[0]+"-"+e[e.length-1]:e[0].toString()))).join(" "):(0,u._x)("SP","study period","wp-ftek-course-pages")}`),(0,e.createElement)("div",{className:"course-layout"},(0,e.createElement)("div",{className:"course-content"},n),(0,e.createElement)("div",{className:"course-sidebar"},s.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,(0,u.__)("Links","wp-ftek-course-pages")),(0,e.createElement)("ul",null,s.map(((t,r)=>(0,e.createElement)("li",{key:r},(0,e.createElement)("a",{target:"_blank",rel:"noopener noreferrer",href:t.url},t.text)))))),a.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,(0,u.__)("Student Representatives","wp-ftek-course-pages")),(0,e.createElement)("ul",null,a.map(((t,r)=>{const n=t.name||t.cid;return(0,e.createElement)("li",{key:r},t.cid?(0,e.createElement)("a",{href:`mailto:${t.cid}@student.chalmers.se`},n):n)})))),(0,e.createElement)("h3",null,(0,u.__)("Is Anything Missing?","wp-ftek-course-pages")),(0,e.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,u.__)("Contact <a %$1s>SNF</a>.","wp-ftek-course-pages").replace("%$1s",'href="mailto:snf@ftek.se"')}}))))}function f(t){let{attributes:l,setAttributes:c,panelIcon:d}=t;const[f,_]=(0,e.useState)(null),[w,h]=(0,e.useState)(null),k=(0,s.useSelect)((e=>e("core/blocks").getBlockType("wp-drive-list/drive-list")),[]),v=[["core/heading",{content:(0,u.__)("Description","wp-ftek-course-pages"),level:3}],["core/paragraph",{placeholder:(0,u.__)("Description goes here.","wp-ftek-course-pages")}],...k?[["core/heading",{content:(0,u._x)("Documents","drive list heading","wp-ftek-course-pages"),level:3}],["wp-drive-list/drive-list",{depth:2,download:!0}]]:[]],E=(0,s.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[y,b]=(0,n.useEntityProp)("postType",E,"meta"),C={...l,..."course-page"===E?Object.fromEntries(Object.entries(y).map((e=>{let[t,r]=e;return[t.replace("wp_ftek_course_pages_",""),r]}))):{}},x=e=>{c(e),b(Object.fromEntries(Object.entries(e).map((e=>{let[t,r]=e;return[`wp_ftek_course_pages_${t}`,r]}))))};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,u.__)("Course Page","wp-ftek-course-pages"),initialOpen:!0,icon:d},(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.TextControl,{label:(0,u.__)("Course code","wp-ftek-course-pages"),value:C.code,onChange:e=>x({...C,code:e})})),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.TextControl,{label:(0,u.__)("Credits","wp-ftek-course-pages"),value:null!==f?f:C.credits,onChange:e=>{_(e);const t=Number(e);Number.isFinite(t)&&t>=0&&x({...C,credits:t})}})),(0,e.createElement)("hr",null),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.TextControl,{label:(0,u.__)("Course homepage URL","wp-ftek-course-pages"),value:C.homepage_url,onChange:e=>x({...C,homepage_url:e})})),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.TextControl,{label:(0,u.__)("Course info URL","wp-ftek-course-pages"),value:C.info_url,onChange:e=>x({...C,info_url:e})})),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.TextControl,{label:(0,u.__)("Latest course survey URL","wp-ftek-course-pages"),value:C.survey_url,onChange:e=>x({...C,survey_url:e})})),(0,e.createElement)("hr",null),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)("div",{className:"wp-block-wp-ftek-course-pages-course-info-inspector list-selector"},(0,e.createElement)("div",{className:"panel-label"},(0,u.__)("Student representatives","wp-ftek-course-pages")),C.student_representatives.map(((t,r)=>(0,e.createElement)("div",{key:r,className:"list-selector-item"},(0,e.createElement)(a.Button,{icon:o,onClick:()=>{const e=[...C.student_representatives];e.splice(r,1),x({...C,student_representatives:e})}}),(0,e.createElement)("div",{className:"stacked-inputs"},(0,e.createElement)(a.TextControl,{label:(0,u.__)("Full Name","wp-ftek-course-pages"),value:t.name,onChange:e=>{const n=[...C.student_representatives];n[r]={...t,name:e},x({...C,student_representatives:n})}}),(0,e.createElement)(a.TextControl,{label:(0,u._x)("CID","Chalmers ID","wp-ftek-course-pages"),value:t.cid,onChange:e=>{const n=[...C.student_representatives];n[r]={...t,cid:e},x({...C,student_representatives:n})}}))))),(0,e.createElement)(a.Button,{onClick:()=>x({...C,student_representatives:[...C.student_representatives,{name:"",cid:""}]}),variant:"secondary"},(0,u._x)("Add","student representative","wp-ftek-course-pages")))),(0,e.createElement)("hr",null),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)("div",{className:"wp-block-wp-ftek-course-pages-course-info-inspector"},(0,e.createElement)("div",{className:"panel-label"},(0,u.__)("Study perionds","wp-ftek-course-pages")),i.map(((t,r)=>(0,e.createElement)(a.CheckboxControl,{key:r,label:(0,u._x)("SP%$1s","study period","wp-ftek-course-pages").replace("%$1s",t.toString()),checked:C.study_perionds.includes(t),onChange:()=>{const e=[...C.study_perionds],r=e.indexOf(t);r>=0?e.splice(r,1):e.push(t),x({...C,study_perionds:e})}}))))),(0,e.createElement)("hr",null),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.RadioControl,{label:(0,u._x)("Year","grade","wp-ftek-course-pages"),selected:C.year,options:m.flatMap((e=>{let t;if(Number.isFinite(Number(e)))t=(0,u._x)("Year %$1s","grade","wp-ftek-course-pages").replace("%$1s",e);else{if("master"!==e)return[];t=(0,u.__)("Master's course","wp-ftek-course-pages")}return{label:t,value:e}})),onChange:e=>x({...C,year:e})})),(0,e.createElement)("hr",null),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)("div",{className:"wp-block-wp-ftek-course-pages-course-info-inspector"},(0,e.createElement)("div",{className:"panel-label"},(0,u.__)("Progammes","wp-ftek-course-pages")),p.map(((t,r)=>(0,e.createElement)(a.CheckboxControl,{key:r,label:t,checked:C.programs.includes(t),onChange:()=>{const e=[...C.programs],r=e.indexOf(t);r>=0?e.splice(r,1):e.push(t),x({...C,programs:e})}}))))),(0,e.createElement)("hr",null),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.TextControl,{label:(0,u.__)("Approximate number of participants","wp-ftek-course-pages"),help:(0,u.__)("Used for sorting courses","wp-ftek-course-pages"),value:null!==w?w:C.participant_count,onChange:e=>{h(e);const t=Number(e);Number.isFinite(t)&&t>=0&&x({...C,participant_count:t})}})))),(0,e.createElement)(g,{meta:C},(0,e.createElement)(r.InnerBlocks,{template:v})))}(0,t.registerBlockType)(c,{edit:function(t){let{attributes:n,setAttributes:s}=t;return(0,e.createElement)("div",(0,r.useBlockProps)(),(0,e.createElement)(f,{attributes:n,setAttributes:s,panelIcon:d}))},save:function(t){let{attributes:n}=t;return(0,e.createElement)("div",r.useBlockProps.save(),(0,e.createElement)(g,{meta:n},(0,e.createElement)(r.InnerBlocks.Content,null)))},icon:d})}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=function(t,r,s,a){if(!r){var l=1/0;for(p=0;p<e.length;p++){r=e[p][0],s=e[p][1],a=e[p][2];for(var o=!0,c=0;c<r.length;c++)(!1&a||l>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(o=!1,a<l&&(l=a));if(o){e.splice(p--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[r,s,a]},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={883:0,359:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,a,l=r[0],o=r[1],c=r[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(c)var p=c(n)}for(t&&t(r);u<l.length;u++)a=l[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(p)},r=self.webpackChunkwp_drive_list=self.webpackChunkwp_drive_list||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var s=n.O(void 0,[359],(function(){return n(627)}));s=n.O(s)}();