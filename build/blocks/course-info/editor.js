!function(){"use strict";var e,t={834:function(){var e=window.wp.element,t=window.wp.blocks,r=window.wp.blockEditor,n=window.wp.coreData,a=window.wp.data,l=window.wp.components,s=window.wp.primitives,o=(0,e.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(s.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})),c=window.wp.i18n,u=function(t){let{url:r,style:n}=t;return(0,e.createElement)("svg",{style:n},(0,e.createElement)("image",{style:{width:"100%"},xlinkHref:r}))},i=function(t){let{header:r,meta:n}=t;const a=[{text:(0,c.__)("Course homepage","wp-ftek-course-pages"),url:n.homepage_url},{text:(0,c.__)("General info","wp-ftek-course-pages"),url:n.info_url},{text:(0,c.__)("Latest survey","wp-ftek-course-pages"),url:n.survey_url},...n.code?[{text:(0,c.__)("Exam statistics","wp-ftek-course-pages"),url:`https://stats.ftek.se/${n.code}`}]:[]].filter((e=>e.url));return 0===a.length?(0,e.createElement)(e.Fragment,null):(0,e.createElement)(e.Fragment,null,r,(0,e.createElement)("ul",{style:{listStyle:"none",margin:0,padding:0}},a.map(((t,r)=>(0,e.createElement)("li",{key:r},(0,e.createElement)("a",{target:"_blank",rel:"noopener noreferrer",href:t.url},t.text))))))};const p=e=>"master"===e?(0,c.__)("Master's course","wp-ftek-course-pages"):(0,c._x)("Year %$1s","grade","wp-ftek-course-pages").replace("%$1s",e),m=e=>Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return t.startsWith("wp_ftek_course_pages_")})).map((e=>{let[t,r]=e;return[t.replace("wp_ftek_course_pages_",""),r]}))),d=["F","TM"],g=[1,2,3,4],f=["1","2","3","master"];var _=JSON.parse('{"apiVersion":2,"name":"wp-ftek-course-pages/course-info","title":"Course info","category":"widgets","textdomain":"wp-ftek-course-pages","attributes":{"code":{"type":"string","default":""},"credits":{"type":"number","default":0},"homepage_url":{"type":"string","default":""},"info_url":{"type":"string","default":""},"survey_url":{"type":"string","default":""},"student_representatives":{"type":"array","default":[]},"study_perionds":{"type":"array","default":[]},"year":{"enum":["","1","2","3","master"],"default":""},"programs":{"type":"array","default":[]},"participant_count":{"type":"number","default":0},"elective":{"type":"boolean","default":false},"comment":{"type":"string","default":""}},"style":"file:style-editor.css","editorScript":"file:editor.js"}');function w(t){let{meta:r,children:n}=t;const a=r.student_representatives.filter((e=>e.name||e.cid));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h2",{className:"course-banner"},`${o=r.code,o||(0,c.__)("Course Code","wp-ftek-course-pages")} | ${s=r.credits,(0,c._x)("%$1s hec","higher education credits","wp-ftek-course-pages").replace("%$1s",(s||0).toString())} | ${((e,t)=>"master"===e?(0,c.__)("Master's course","wp-ftek-course-pages"):t.length>0?t.sort().map((t=>t+e||"")).join(" "):(0,c._x)("Year","grade","wp-ftek-course-pages"))(r.year,r.programs)} | ${l=r.study_perionds,l.length>0?l.sort().map((e=>[[e]])).reduce(((e,t)=>{const r=e[e.length-1];return t[0][0]-r[r.length-1]==1?r.push(t[0][0]):e.push(t[0]),e})).map((e=>(0,c._x)("SP%$1s","study period","wp-ftek-course-pages").replace("%$1s",e.length>1?e[0]+"-"+e[e.length-1]:e[0].toString()))).join(" "):(0,c._x)("SP","study period","wp-ftek-course-pages")}`),(0,e.createElement)("div",{className:"course-layout"},(0,e.createElement)("div",{className:"course-content"},n),(0,e.createElement)("div",{className:"course-sidebar"},(0,e.createElement)(i,{header:(0,e.createElement)("h3",null,(0,c.__)("Links","wp-ftek-course-pages")),meta:r}),a.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,(0,c.__)("Student Representatives","wp-ftek-course-pages")),(0,e.createElement)("ul",null,a.map(((t,r)=>{const n=t.name||t.cid;return(0,e.createElement)("li",{key:r},t.cid?(0,e.createElement)("a",{href:`mailto:${t.cid}@student.chalmers.se`},n):n)})))),(0,e.createElement)("h3",null,(0,c.__)("Is Anything Missing?","wp-ftek-course-pages")),(0,e.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,c.__)("Contact <a %$1s>SNF</a>.","wp-ftek-course-pages").replace("%$1s",'href="mailto:snf@ftek.se"')}}))));var l,s,o}function h(t){let{attributes:s,setAttributes:u,panelIcon:i}=t;const[_,h]=(0,e.useState)(null),[E,k]=(0,e.useState)(null),v=(0,a.useSelect)((e=>e("core/blocks").getBlockType("wp-drive-list/drive-list")),[]),y=[["core/heading",{content:(0,c.__)("Description","wp-ftek-course-pages"),level:3}],["core/paragraph",{placeholder:(0,c.__)("Description goes here.","wp-ftek-course-pages")}],...v?[["core/heading",{content:(0,c._x)("Documents","drive list heading","wp-ftek-course-pages"),level:3}],["wp-drive-list/drive-list",{depth:2,download:!0}]]:[]],b=(0,a.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[C,x]=(0,n.useEntityProp)("postType",b,"meta"),P={...s,..."course-page"===b?m(C):{}},S=e=>{u(e),"course-page"===b&&x((e=>Object.fromEntries(Object.entries(e).map((e=>{let[t,r]=e;return[`wp_ftek_course_pages_${t}`,r]}))))(e))};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,c.__)("Course Page","wp-ftek-course-pages"),initialOpen:!0,icon:i},(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.TextControl,{label:(0,c.__)("Course code","wp-ftek-course-pages"),value:P.code,onChange:e=>S({...P,code:e})})),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.TextControl,{label:(0,c.__)("Credits","wp-ftek-course-pages"),value:null!==_?_:P.credits,onChange:e=>{h(e);const t=Number(e);Number.isFinite(t)&&t>=0&&S({...P,credits:t})}})),(0,e.createElement)("hr",null),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.TextControl,{label:(0,c.__)("Course homepage URL","wp-ftek-course-pages"),value:P.homepage_url,onChange:e=>S({...P,homepage_url:e})})),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.TextControl,{label:(0,c.__)("Course info URL","wp-ftek-course-pages"),value:P.info_url,onChange:e=>S({...P,info_url:e})})),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.TextControl,{label:(0,c.__)("Latest course survey URL","wp-ftek-course-pages"),value:P.survey_url,onChange:e=>S({...P,survey_url:e})})),(0,e.createElement)("hr",null),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)("div",{className:"wp-block-wp-ftek-course-pages-course-info-inspector list-selector"},(0,e.createElement)("div",{className:"panel-label"},(0,c.__)("Student representatives","wp-ftek-course-pages")),P.student_representatives.map(((t,r)=>(0,e.createElement)("div",{key:r,className:"list-selector-item"},(0,e.createElement)(l.Button,{icon:o,onClick:()=>{const e=[...P.student_representatives];e.splice(r,1),S({...P,student_representatives:e})}}),(0,e.createElement)("div",{className:"stacked-inputs"},(0,e.createElement)(l.TextControl,{label:(0,c.__)("Full Name","wp-ftek-course-pages"),value:t.name,onChange:e=>{const n=[...P.student_representatives];n[r]={...t,name:e},S({...P,student_representatives:n})}}),(0,e.createElement)(l.TextControl,{label:(0,c._x)("CID","Chalmers ID","wp-ftek-course-pages"),value:t.cid,onChange:e=>{const n=[...P.student_representatives];n[r]={...t,cid:e},S({...P,student_representatives:n})}}))))),(0,e.createElement)(l.Button,{onClick:()=>S({...P,student_representatives:[...P.student_representatives,{name:"",cid:""}]}),variant:"secondary"},(0,c._x)("Add","student representative","wp-ftek-course-pages")))),(0,e.createElement)("hr",null),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)("div",{className:"wp-block-wp-ftek-course-pages-course-info-inspector"},(0,e.createElement)("div",{className:"panel-label"},(0,c.__)("Study period","wp-ftek-course-pages")),g.map(((t,r)=>(0,e.createElement)(l.CheckboxControl,{key:r,label:(0,c._x)("SP%$1s","study period","wp-ftek-course-pages").replace("%$1s",t.toString()),checked:P.study_perionds.includes(t),onChange:()=>{const e=[...P.study_perionds],r=e.indexOf(t);r>=0?e.splice(r,1):e.push(t),S({...P,study_perionds:e})}}))))),(0,e.createElement)("hr",null),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.RadioControl,{label:(0,c._x)("Year","grade","wp-ftek-course-pages"),selected:P.year,options:f.map((e=>({label:p(e),value:e}))),onChange:e=>S({...P,year:e})})),(0,e.createElement)("hr",null),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)("div",{className:"wp-block-wp-ftek-course-pages-course-info-inspector"},(0,e.createElement)("div",{className:"panel-label"},(0,c.__)("Progammes","wp-ftek-course-pages")),d.map(((t,r)=>(0,e.createElement)(l.CheckboxControl,{key:r,label:t,checked:P.programs.includes(t),onChange:()=>{const e=[...P.programs],r=e.indexOf(t);r>=0?e.splice(r,1):e.push(t),S({...P,programs:e})}}))))),(0,e.createElement)("hr",null),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.TextControl,{label:(0,c.__)("Approximate number of participants","wp-ftek-course-pages"),help:(0,c.__)("Used for sorting courses","wp-ftek-course-pages"),value:null!==E?E:P.participant_count,onChange:e=>{k(e);const t=Number(e);Number.isFinite(t)&&t>=0&&S({...P,participant_count:t})}})),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.CheckboxControl,{label:(0,c.__)("Elective course","wp-ftek-course-pages"),checked:P.elective,onChange:e=>{S({...P,elective:e})}})),(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.TextControl,{label:(0,c.__)("Comment","wp-ftek-course-pages"),help:(0,c.__)("Shown as footnote in course table","wp-ftek-course-pages"),value:P.comment,onChange:e=>{S({...P,comment:e})}})))),(0,e.createElement)(w,{meta:P},(0,e.createElement)(r.InnerBlocks,{template:y})))}(0,t.registerBlockType)(_,{edit:function(t){let{attributes:n,setAttributes:a}=t;return(0,e.createElement)("div",(0,r.useBlockProps)(),(0,e.createElement)(h,{attributes:n,setAttributes:a,panelIcon:(0,e.createElement)(u,{url:wpFtekCoursePagesCourseInfoEditor.iconUrl,style:{width:24,height:24,marginLeft:12}})}))},save:function(t){let{attributes:n}=t;return(0,e.createElement)("div",r.useBlockProps.save(),(0,e.createElement)(w,{meta:n},(0,e.createElement)(r.InnerBlocks.Content,null)))},icon:(0,e.createElement)(u,{url:wpFtekCoursePagesCourseInfoEditor.iconUrl})})}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=function(t,r,a,l){if(!r){var s=1/0;for(i=0;i<e.length;i++){r=e[i][0],a=e[i][1],l=e[i][2];for(var o=!0,c=0;c<r.length;c++)(!1&l||s>=l)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(o=!1,l<s&&(s=l));if(o){e.splice(i--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[r,a,l]},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={883:0,359:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,l,s=r[0],o=r[1],c=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var i=c(n)}for(t&&t(r);u<s.length;u++)l=s[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(i)},r=self.webpackChunkwp_drive_list=self.webpackChunkwp_drive_list||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var a=n.O(void 0,[359],(function(){return n(834)}));a=n.O(a)}();