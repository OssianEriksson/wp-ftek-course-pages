!function(){"use strict";var e,t={998:function(e,t,r){var n=window.wp.element,a=window.wp.blocks,l=window.wp.blockEditor,o=window.wp.i18n,s=window.wp.apiFetch,c=r.n(s),i=window.wp.url;const u=["F","TM"],p=[1,2,3,4],f=["1","2","3","master"];var m=JSON.parse('{"apiVersion":2,"name":"wp-ftek-course-pages/course-table","title":"Course table","category":"widgets","textdomain":"wp-ftek-course-pages","style":"file:style-editor.css","editorScript":"file:editor.js"}');function d(e){let{posts:t,year:r}=e;const a=["multiple",...u],l=Object.fromEntries(a.map((e=>[e,Math.max(...Object.values(t[e]).map((e=>e.length)))])));return Math.max(...Object.values(l))<=0?(0,n.createElement)("p",null,(0,o.__)("No courses found","wp-ftek-course-pages")):(0,n.createElement)("table",null,(0,n.createElement)("thead",null,(0,n.createElement)("tr",null,(0,n.createElement)("th",null),p.map(((e,t)=>(0,n.createElement)("th",{key:t},(0,o.__)("Study period %$1s","wp-ftek-course-pages").replace("%$1s",e.toString())))))),(0,n.createElement)("tbody",null,a.map(((e,a)=>{const s=t[e],c=l[e];return[...Array(l[e]).keys()].map((t=>(0,n.createElement)("tr",{key:`${a}.${t}`},0===t&&(0,n.createElement)("th",{rowSpan:c},"multiple"===e?(0,o._x)("Y%$1s","grade","wp-ftek-course-pages").replace("%$1s",r):((e,t)=>"master"===e?(0,o.__)("Master's course","wp-ftek-course-pages"):t.length>0?t.sort().map((t=>t+e||"")).join(" "):(0,o._x)("Year","grade","wp-ftek-course-pages"))(r,[e])),p.flatMap(((e,r)=>t>s[e].length?[]:t===s[e].length?[(0,n.createElement)("td",{key:r,rowSpan:c-t})]:[(0,n.createElement)("td",{key:r},(0,n.createElement)("a",{href:s[e][t].link},s[e][t].title))])))))}))))}function w(){const e=function(e,t){const[r,a]=(0,n.useState)([]);return(0,n.useEffect)((()=>{r.length%100==0&&c()({...e,path:(0,i.addQueryArgs)(e.path,{per_page:100,offset:r.length})}).then((e=>{Array.isArray(e)&&e.length>0&&a([...r,...e])})).catch(console.error)}),[r,void 0]),r}({path:"/wp/v2/course-page"}),t=Object.fromEntries(f.filter((e=>"master"!==e)).map((e=>[e,Object.fromEntries([...u,"multiple"].map((e=>[e,Object.fromEntries(p.map((e=>[e,[]])))])))])));return e.forEach((e=>{const{wp_ftek_course_pages_programs:r,wp_ftek_course_pages_year:n,wp_ftek_course_pages_study_perionds:a}=e.meta;if(r.length<=0||!n)return;const l=r.length>1?"multiple":r[0];a.forEach((r=>{t[n][l][r].push({title:e.title.rendered,link:e.link})}))})),(0,n.createElement)("div",{className:"table-wrapper"},f.filter((e=>"master"!==e)).map(((e,r)=>(0,n.createElement)(n.Fragment,{key:r},(0,n.createElement)("h3",null,(0,o._x)("Year %$1s","grade","wp-ftek-course-pages").replace("%$1s",e)),(0,n.createElement)(d,{key:r,year:e,posts:t[e]})))))}(0,a.registerBlockType)(m,{edit:function(){return(0,n.createElement)("div",(0,l.useBlockProps)(),(0,n.createElement)(w,null))},save:()=>null,icon:(0,n.createElement)((function(e){let{url:t,style:r}=e;return(0,n.createElement)("svg",{style:r},(0,n.createElement)("image",{style:{width:"100%"},xlinkHref:t}))}),{url:wpFtekCoursePagesCourseTableEditor.iconUrl})})}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=function(t,r,a,l){if(!r){var o=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],l=e[u][2];for(var s=!0,c=0;c<r.length;c++)(!1&l||o>=l)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(s=!1,l<o&&(o=l));if(s){e.splice(u--,1);var i=a();void 0!==i&&(t=i)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,a,l]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,220:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,l,o=r[0],s=r[1],c=r[2],i=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var u=c(n)}for(t&&t(r);i<o.length;i++)l=o[i],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},r=self.webpackChunkwp_drive_list=self.webpackChunkwp_drive_list||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var a=n.O(void 0,[220],(function(){return n(998)}));a=n.O(a)}();