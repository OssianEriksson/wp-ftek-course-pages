!function(){"use strict";var e,t={998:function(e,t,r){var n=window.wp.element,a=window.wp.blocks,o=window.wp.blockEditor,l=window.wp.i18n,s=window.wp.apiFetch,c=r.n(s),u=window.wp.url;const i=["F","TM"],p=[1,2,3,4],f=["1","2","3","master"];var m=JSON.parse('{"apiVersion":2,"name":"wp-ftek-course-pages/course-table","title":"Course table","category":"widgets","textdomain":"wp-ftek-course-pages","style":"file:style-editor.css","editorScript":"file:editor.js"}');function d(e){let{posts:t,year:r,footnotes:a}=e;const o=["multiple",...i],s=Object.fromEntries(o.map((e=>[e,Math.max(...Object.values(t[e]).map((e=>e.length)))])));return Math.max(...Object.values(s))<=0?(0,n.createElement)("p",null,(0,l.__)("No courses found","wp-ftek-course-pages")):(0,n.createElement)("table",null,(0,n.createElement)("thead",null,(0,n.createElement)("tr",null,(0,n.createElement)("th",null),p.map(((e,t)=>(0,n.createElement)("th",{key:t},(0,l.__)("Study period %$1s","wp-ftek-course-pages").replace("%$1s",e.toString())))))),(0,n.createElement)("tbody",null,o.map(((e,o)=>{const c=t[e],u=s[e];return[...Array(s[e]).keys()].map((t=>(0,n.createElement)("tr",{key:`${o}.${t}`},0===t&&(0,n.createElement)("th",{rowSpan:u},"multiple"===e?(0,l._x)("Y%$1s","grade","wp-ftek-course-pages").replace("%$1s",r):((e,t)=>"master"===e?(0,l.__)("Master's course","wp-ftek-course-pages"):t.length>0?t.sort().map((t=>t+e||"")).join(" "):(0,l._x)("Year","grade","wp-ftek-course-pages"))(r,[e])),p.flatMap(((e,r)=>{if(t>c[e].length)return[];if(t===c[e].length)return[(0,n.createElement)("td",{key:r,rowSpan:u-t})];const o=c[e][t];return[(0,n.createElement)("td",{key:r},(0,n.createElement)("a",{href:o.link},o.title),o.comments.map(((e,t)=>{const r=a[e];return(0,n.createElement)("sup",{key:t},t>0&&",",(0,n.createElement)("a",{href:`#table-footnote-${r}`},r))})))]})))))}))))}function g(){const e=function(e,t){const[r,a]=(0,n.useState)([]);return(0,n.useEffect)((()=>{r.length%100==0&&c()({...e,path:(0,u.addQueryArgs)(e.path,{per_page:100,offset:r.length})}).then((e=>{Array.isArray(e)&&e.length>0&&a([...r,...e])})).catch(console.error)}),[r,void 0]),r}({path:"/wp/v2/course-page"}),t=Object.fromEntries(f.filter((e=>"master"!==e)).map((e=>[e,Object.fromEntries([...i,"multiple"].map((e=>[e,Object.fromEntries(p.map((e=>[e,[]])))])))])));let r=1;const a=(0,l.__)("Elective course","wp-ftek-course-pages"),o={};e.forEach((e=>{const{wp_ftek_course_pages_programs:n,wp_ftek_course_pages_year:l,wp_ftek_course_pages_study_perionds:s,wp_ftek_course_pages_comment:c,wp_ftek_course_pages_elective:u}=e.meta;if(n.length<=0||!l)return;const i=[...u?[a]:[],...c?[c]:[]];i.forEach((e=>{e in o||(o[e]=r++)}));const p=n.length>1?"multiple":n[0];s.forEach((r=>{t[l][p][r].push({title:e.title.rendered,link:e.link,comments:i})}))}));const s=Object.entries(o);return(0,n.createElement)("div",{className:"table-wrapper"},f.filter((e=>"master"!==e)).map(((e,r)=>(0,n.createElement)(n.Fragment,{key:r},(0,n.createElement)("h3",null,(0,l._x)("Year %$1s","grade","wp-ftek-course-pages").replace("%$1s",e)),(0,n.createElement)(d,{key:r,year:e,posts:t[e],footnotes:o})))),s.length>0&&(0,n.createElement)("p",null,s.map(((e,t)=>{let[r,a]=e;return(0,n.createElement)(n.Fragment,null,t>0&&(0,n.createElement)("br",null),(0,n.createElement)("span",{key:t,id:`table-footnote-${a}`},(0,n.createElement)("sup",null,a),r))}))))}(0,a.registerBlockType)(m,{edit:function(){return(0,n.createElement)("div",(0,o.useBlockProps)(),(0,n.createElement)(g,null))},save:()=>null,icon:(0,n.createElement)((function(e){let{url:t,style:r}=e;return(0,n.createElement)("svg",{style:r},(0,n.createElement)("image",{style:{width:"100%"},xlinkHref:t}))}),{url:wpFtekCoursePagesCourseTableEditor.iconUrl})})}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=function(t,r,a,o){if(!r){var l=1/0;for(i=0;i<e.length;i++){r=e[i][0],a=e[i][1],o=e[i][2];for(var s=!0,c=0;c<r.length;c++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(s=!1,o<l&&(l=o));if(s){e.splice(i--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[r,a,o]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,220:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,l=r[0],s=r[1],c=r[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var i=c(n)}for(t&&t(r);u<l.length;u++)o=l[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(i)},r=self.webpackChunkwp_drive_list=self.webpackChunkwp_drive_list||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var a=n.O(void 0,[220],(function(){return n(998)}));a=n.O(a)}();