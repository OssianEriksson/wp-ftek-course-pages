!function(){"use strict";var e={n:function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,r=window.wp.i18n,n=window.wp.apiFetch,a=e.n(n),l=window.wp.url;const o=["F","TM"],s=[1,2,3,4],c=["1","2","3","master"];function p(e){let{posts:n,year:a,footnotes:l}=e;const c=["multiple",...o],p=Object.fromEntries(c.map((e=>[e,Math.max(...Object.values(n[e]).map((e=>e.length)))])));return Math.max(...Object.values(p))<=0?(0,t.createElement)("p",null,(0,r.__)("No courses found","wp-ftek-course-pages")):(0,t.createElement)("table",null,(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null),s.map(((e,n)=>(0,t.createElement)("th",{key:n},(0,r.__)("Study period %$1s","wp-ftek-course-pages").replace("%$1s",e.toString())))))),(0,t.createElement)("tbody",null,c.map(((e,o)=>{const c=n[e],u=p[e];return[...Array(p[e]).keys()].map((n=>(0,t.createElement)("tr",{key:`${o}.${n}`},0===n&&(0,t.createElement)("th",{rowSpan:u},"multiple"===e?(0,r._x)("Y%$1s","grade","wp-ftek-course-pages").replace("%$1s",a):((e,t)=>"master"===e?(0,r.__)("Master's course","wp-ftek-course-pages"):t.length>0?t.sort().map((t=>t+e||"")).join(" "):(0,r._x)("Year","grade","wp-ftek-course-pages"))(a,[e])),s.flatMap(((e,r)=>{if(n>c[e].length)return[];if(n===c[e].length)return[(0,t.createElement)("td",{key:r,rowSpan:u-n})];const a=c[e][n];return[(0,t.createElement)("td",{key:r},(0,t.createElement)("a",{href:a.link},a.title),a.comments.map(((e,r)=>{const n=l[e];return(0,t.createElement)("sup",{key:r},r>0&&",",(0,t.createElement)("a",{href:`#table-footnote-${n}`},n))})))]})))))}))))}function u(){const e=function(e,r){const[n,o]=(0,t.useState)([]);return(0,t.useEffect)((()=>{n.length%100==0&&a()({...e,path:(0,l.addQueryArgs)(e.path,{per_page:100,offset:n.length})}).then((e=>{Array.isArray(e)&&e.length>0&&o([...n,...e])})).catch(console.error)}),[n,void 0]),n}({path:"/wp/v2/course-page"}),n=Object.fromEntries(c.filter((e=>"master"!==e)).map((e=>[e,Object.fromEntries([...o,"multiple"].map((e=>[e,Object.fromEntries(s.map((e=>[e,[]])))])))])));let u=1;const m=(0,r.__)("Elective course","wp-ftek-course-pages"),i={};e.forEach((e=>{const{wp_ftek_course_pages_programs:t,wp_ftek_course_pages_year:r,wp_ftek_course_pages_study_perionds:a,wp_ftek_course_pages_comment:l,wp_ftek_course_pages_elective:o}=e.meta;if(t.length<=0||!r)return;const s=[...o?[m]:[],...l?[l]:[]];s.forEach((e=>{e in i||(i[e]=u++)}));const c=t.length>1?"multiple":t[0];a.forEach((t=>{n[r][c][t].push({title:e.title.rendered,link:e.link,comments:s})}))}));const f=Object.entries(i);return(0,t.createElement)("div",{className:"table-wrapper"},c.filter((e=>"master"!==e)).map(((e,a)=>(0,t.createElement)(t.Fragment,{key:a},(0,t.createElement)("h3",null,(0,r._x)("Year %$1s","grade","wp-ftek-course-pages").replace("%$1s",e)),(0,t.createElement)(p,{year:e,posts:n[e],footnotes:i})))),f.length>0&&(0,t.createElement)("p",null,f.map(((e,r)=>{let[n,a]=e;return(0,t.createElement)(t.Fragment,{key:r},r>0&&(0,t.createElement)("br",null),(0,t.createElement)("span",{id:`table-footnote-${a}`},(0,t.createElement)("sup",null,a),n))}))))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementsByClassName("wp-block-wp-ftek-course-pages-course-table");for(let r=0;r<e.length;r++)(0,t.render)((0,t.createElement)(u,null),e.item(r))}))}();