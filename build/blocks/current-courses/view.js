!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,n=window.wp.i18n,r=window.wp.apiFetch,a=e.n(r);const s=["F","TM"],o=[1,2,3,4];var u=window.wp.url;const c=e=>"master"===e?(0,n.__)("Master's course","wp-ftek-course-pages"):(0,n._x)("Year %$1s","grade","wp-ftek-course-pages").replace("%$1s",e);var l=function(){const[e,r]=(0,t.useState)(null),[l,p]=(0,t.useState)(o[0]);(0,t.useEffect)((()=>{a()({path:"/wp-ftek-course-pages/v1/settings"}).then((e=>{const t=e;r((()=>t));const n=new Date,a=t.study_periods_end.map(((e,t)=>({end:new Date(n.getFullYear(),e.month-1,e.day),sp:o[t]}))).sort(((e,t)=>e.end.valueOf()-t.end.valueOf()));for(let e=a.length-1;e>=0;e--)if(n>a[e].end)return void p((()=>a[(e+1)%a.length].sp));p((()=>a[0].sp))}))}),[]);const d=function(e,n){const[r,s]=(0,t.useState)([]);return(0,t.useEffect)((()=>{r.length%100==0&&a()({...e,path:(0,u.addQueryArgs)(e.path,{per_page:100,offset:r.length})}).then((e=>{Array.isArray(e)&&e.length>0&&s([...r,...e])})).catch(console.error)}),[r,void 0]),r}({path:"/wp/v2/course-page"}).filter((e=>e.meta.wp_ftek_course_pages_study_perionds.includes(l)));return(0,t.createElement)(t.Fragment,null,["1","2","3"].map((r=>{const a=d.filter((e=>e.meta.wp_ftek_course_pages_year===r)).sort(((e,t)=>t.meta.wp_ftek_course_pages_participant_count-e.meta.wp_ftek_course_pages_participant_count));return(0,t.createElement)(t.Fragment,{key:r},(0,t.createElement)("h3",{dangerouslySetInnerHTML:{__html:c(r)+" "+(0,n.__)("(Schedule %$1s)","wp-ftek-course-pages").replace("%$1s",s.map((t=>{var n;return`<a href="${(null==e||null===(n=e.schedules)||void 0===n?void 0:n[t])||""}">${t}</a>`})).join(", "))}}),a.length>0?(0,t.createElement)("ul",null,a.map(((e,n)=>(0,t.createElement)("li",{key:n},(0,t.createElement)("a",{href:e.link},e.title.rendered))))):(0,t.createElement)("p",null,(0,n.__)("No courses found","wp-ftek-course-pages")))})))};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementsByClassName("wp-block-wp-ftek-course-pages-current-courses");for(let n=0;n<e.length;n++)(0,t.render)((0,t.createElement)(l,null),e.item(n))}))}();